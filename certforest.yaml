# CertForest Configuration
# mTLS 인증서 생성을 위한 설정 파일

# 타원 곡선 알고리즘 설정 (P-256, P-384, P-521)
curve: P-256

# 인증서 유효기간 설정 (년 단위)
# [중요] 최신 브라우저(Chrome, Safari 등) 및 OS 정책상
# 서버 인증서의 유효기간이 398일(약 13개월)을 초과하면 신뢰하지 않는 인증서로 간주됩니다.
# 따라서 server 설정은 반드시 1년 이하로 설정하는 것을 권장합니다.
validity:
  ca: 10       # Root CA 유효기간 (년)
  server: 1    # 서버 인증서 유효기간 (년) - *1년 초과 시 브라우저 경고 발생 가능*
  client: 1    # 클라이언트 인증서 유효기간 (년)

# 공통 Distinguished Name (DN) 정보
dn:
  country: KR
  state: Seoul
  locality: Gangnam
  organization: My Organization

# Root CA 인증서 설정
ca:
  organizational_unit: Certificate Authority
  common_name: My Root CA
  # CA는 반드시 keyCertSign 권한이 필요합니다.
  key_usage:
    - keyCertSign
    - cRLSign

# 서버 인증서 설정
server:
  organizational_unit: Web Server
  common_name: localhost
  
  # ECDSA 키 사용 시 keyEncipherment 대신 keyAgreement를 사용하는 것이 표준입니다.
  # (TLS 핸드셰이크 시 키 교환 방식에 따라 다름)
  key_usage:
    - digitalSignature
    - keyAgreement
    
  # 서버 인증용임을 명시 (필수)
  ext_key_usage:
    - serverAuth
    
  # [매우 중요] Subject Alternative Name (SAN) 설정
  # 최신 브라우저는 보안상 Common Name(CN) 필드를 무시하고 오직 SAN 필드만 확인합니다.
  # 접속할 도메인이나 IP가 여기에 포함되지 않으면 "NET::ERR_CERT_COMMON_NAME_INVALID" 오류가 발생합니다.
  alt_names:
    dns:
      - localhost
      - example.com
      - www.example.com
    ip:
      - 127.0.0.1
      # - 192.168.0.10

# 클라이언트 인증서 설정
client:
  organizational_unit: Client Certificate
  common_name: my-client
  
  # 클라이언트 인증용임을 명시 (mTLS 필수)
  key_usage:
    - digitalSignature
  ext_key_usage:
    - clientAuth
